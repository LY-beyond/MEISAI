# 《与星共舞》粉丝投票预测模型数学公式总结

## 1. 数据预处理公式

### 1.1 每周总分计算
$$S_{w,j} = \sum_{k=1}^{K} s_{w,j,k}$$

其中:
- $S_{w,j}$: 第$j$位选手在第$w$周的总分
- $s_{w,j,k}$: 第$j$位选手在第$w$周第$k$位评委的分数
- $K$: 评委总数

### 1.2 评委百分比计算
$$P_{j} = \frac{S_{j}}{\sum_{i=1}^{N} S_{i}}$$

其中:
- $P_{j}$: 第$j$位选手的评委百分比
- $S_{j}$: 第$j$位选手的总分
- $N$: 活跃选手总数

## 2. 预测函数数学公式

### 2.1 排名法预测公式

#### 2.1.1 评委排名计算
$$R_{j}^{judge} = \text{rank}(S_{j}, \text{descending})$$

其中:
- $R_{j}^{judge}$: 第$j$位选手的评委排名
- $\text{rank}()$: 排名函数（分数越高，排名越小）

#### 2.1.2 粉丝排名计算
$$R_{j}^{fan} = \text{rank}(V_{j}^{fan}, \text{descending})$$

其中:
- $R_{j}^{fan}$: 第$j$位选手的粉丝排名
- $V_{j}^{fan}$: 第$j$位选手的粉丝投票比例

#### 2.1.3 综合排名计算
$$R_{j}^{total} = R_{j}^{judge} + R_{j}^{fan}$$

其中:
- $R_{j}^{total}$: 第$j$位选手的综合排名

#### 2.1.4 粉丝投票比例计算
$$V_{j}^{fan} = \frac{\exp(-R_{j}^{fan}/2)}{\sum_{i=1}^{N} \exp(-R_{i}^{fan}/2)}$$

其中:
- $V_{j}^{fan}$: 第$j$位选手的预测粉丝投票比例
- $\exp()$: 指数函数
- $N$: 活跃选手总数

### 2.2 百分比法预测公式

#### 2.2.1 评委百分比计算
$$P_{j} = \frac{S_{j}}{\sum_{i=1}^{N} S_{i}}$$

其中:
- $P_{j}$: 第$j$位选手的评委百分比
- $S_{j}$: 第$j$位选手的总分
- $N$: 活跃选手总数

#### 2.2.2 狄利克雷分布参数计算
$$\alpha_{j} = 1 + \frac{S_{j}}{100}$$

其中:
- $\alpha_{j}$: 第$j$位选手的狄利克雷分布参数
- $S_{j}$: 第$j$位选手的总分

#### 2.2.3 粉丝投票生成
$$V_{j}^{fan} \sim \text{Dirichlet}(\alpha_{1}, \alpha_{2}, ..., \alpha_{N})$$

其中:
- $V_{j}^{fan}$: 第$j$位选手的粉丝投票比例
- $\text{Dirichlet}()$: 狄利克雷分布

#### 2.2.4 综合百分比计算
$$T_{j} = 0.4 \times P_{j} + 0.6 \times V_{j}^{fan}$$

其中:
- $T_{j}$: 第$j$位选手的综合百分比
- $P_{j}$: 第$j$位选手的评委百分比
- $V_{j}^{fan}$: 第$j$位选手的粉丝投票比例

## 3. 不确定性计算公式

### 3.1 平均值计算
$$\mu = \frac{1}{M} \sum_{m=1}^{M} x_{m}$$

其中:
- $\mu$: 样本均值
- $M$: 样本数量
- $x_{m}$: 第$m$个样本值

### 3.2 标准差计算
$$\sigma = \sqrt{\frac{1}{M-1} \sum_{m=1}^{M} (x_{m} - \mu)^{2}}$$

其中:
- $\sigma$: 样本标准差
- $\mu$: 样本均值
- $M$: 样本数量
- $x_{m}$: 第$m$个样本值

### 3.3 变异系数计算
$$CV = \frac{\sigma}{\mu}$$

其中:
- $CV$: 变异系数
- $\sigma$: 标准差
- $\mu$: 均值

### 3.4 置信区间计算
$$CI_{low} = \mu - 1.96 \times \frac{\sigma}{\sqrt{M}}$$
$$CI_{high} = \mu + 1.96 \times \frac{\sigma}{\sqrt{M}}$$

其中:
- $CI_{low}$: 置信下限
- $CI_{high}$: 置信上限
- $M$: 样本数量

## 4. 一致性度量计算公式

### 4.1 准确率计算
$$Accuracy = \frac{TP + TN}{TP + TN + FP + FN}$$

其中:
- $TP$: 真正例（实际被淘汰且被预测淘汰）
- $TN$: 真负例（实际未被淘汰且被预测未淘汰）
- $FP$: 假正例（实际未被淘汰但被预测淘汰）
- $FN$: 假负例（实际被淘汰但被预测未淘汰）

### 4.2 精确率计算
$$Precision = \frac{TP}{TP + FP}$$

### 4.3 召回率计算
$$Recall = \frac{TP}{TP + FN}$$

### 4.4 F1分数计算
$$F1 = 2 \times \frac{Precision \times Recall}{Precision + Recall}$$

## 5. 统计分析公式

### 5.1 斯皮尔曼相关系数
$$\rho = 1 - \frac{6 \sum d_{i}^{2}}{n(n^{2}-1)}$$

其中:
- $\rho$: 斯皮尔曼相关系数
- $d_{i}$: 第$i$对观测值的秩差
- $n$: 观测对数

### 5.2 皮尔逊相关系数
$$r = \frac{\sum (x_{i} - \bar{x})(y_{i} - \bar{y})}{\sqrt{\sum (x_{i} - \bar{x})^{2} \sum (y_{i} - \bar{y})^{2}}}$$

其中:
- $r$: 皮尔逊相关系数
- $\bar{x}, \bar{y}$: 变量$x$和$y$的均值

### 5.3 ANOVA检验
$$F = \frac{MSB}{MSW}$$

其中:
- $F$: F统计量
- $MSB$: 组间平方和均方
- $MSW$: 组内平方和均方

## 6. 符号表

| 符号 | 含义 | 类型 |
|------|------|------|
| $S_{w,j}$ | 第$j$位选手在第$w$周的总分 | 数值 |
| $s_{w,j,k}$ | 第$j$位选手在第$w$周第$k$位评委的分数 | 数值 |
| $K$ | 评委总数 | 整数 |
| $P_{j}$ | 第$j$位选手的评委百分比 | 数值 |
| $N$ | 活跃选手总数 | 整数 |
| $R_{j}^{judge}$ | 第$j$位选手的评委排名 | 整数 |
| $R_{j}^{fan}$ | 第$j$位选手的粉丝排名 | 整数 |
| $R_{j}^{total}$ | 第$j$位选手的综合排名 | 整数 |
| $V_{j}^{fan}$ | 第$j$位选手的粉丝投票比例 | 数值 |
| $T_{j}$ | 第$j$位选手的综合百分比 | 数值 |
| $\alpha_{j}$ | 第$j$位选手的狄利克雷分布参数 | 数值 |
| $\mu$ | 样本均值 | 数值 |
| $\sigma$ | 样本标准差 | 数值 |
| $CV$ | 变异系数 | 数值 |
| $CI_{low}$ | 置信下限 | 数值 |
| $CI_{high}$ | 置信上限 | 数值 |
| $TP$ | 真正例 | 整数 |
| $TN$ | 真负例 | 整数 |
| $FP$ | 假正例 | 整数 |
| $FN$ | 假负例 | 整数 |
| $\rho$ | 斯皮尔曼相关系数 | 数值 |
| $r$ | 皮尔逊相关系数 | 数值 |
| $F$ | F统计量 | 数值 |

## 7. 模型参数

### 7.1 投票方法参数
- **排名法**: 评委权重 = 50%, 粉丝权重 = 50%
- **百分比法**: 评委权重 = 40%, 粉丝权重 = 60%

### 7.2 不确定性参数
- **置信水平**: 95%
- **样本数量**: 20 (预测时)
- **狄利克雷分布**: 对称分布

### 7.3 统计参数
- **相关系数**: 斯皮尔曼相关系数 (排名法), 皮尔逊相关系数 (百分比法)
- **显著性水平**: 0.05 (ANOVA检验)

## 8. 模型假设

### 8.1 数据假设
1. 评委评分服从正态分布
2. 粉丝投票服从狄利克雷分布
3. 选手表现相对稳定

### 8.2 方法假设
1. 排名法假设: 排名比绝对分数更重要
2. 百分比法假设: 比例比排名更能反映真实支持度
3. 综合假设: 评委和粉丝意见都重要

## 9. 模型局限性

### 9.1 数学局限
1. 排名法忽略了分数差距
2. 百分比法假设粉丝投票独立
3. 狄利克雷分布可能不完全符合实际

### 9.2 实际局限
1. 未考虑选手之间的相互影响
2. 未考虑评委评分的主观性
3. 未考虑粉丝投票的策略性

---

**生成时间**: 2026-01-31  
**模型版本**: 1.0  
**数据覆盖**: 34个赛季, 2777条记录